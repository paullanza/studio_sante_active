<div class="container mt-4">
  <h1 class="mb-4">Tableau de bord d’administration</h1>

  <div class="mb-4 d-flex flex-wrap gap-3">
    <%= button_to "Importer tous les client·e·s",
                  import_clients_path,
                  method: :post,
                  class: "btn btn-danger",
                  form: { data: { turbo_confirm: "Ceci va importer tous les client·e·s depuis Fliip. Continuer?" } } %>

    <%= link_to "Gérer les limites de séances des services", admin_services_path, class: "btn btn-outline-dark" %>
    <%= link_to "Passer en revue les séances non confirmées", admin_unconfirmed_sessions_path, class: "btn btn-outline-primary" %>
    <%= link_to "Exporter les client·e·s et les services (CSV)",
                admin_client_services_path(format: :csv),
                class: "btn btn-outline-success",
                data: { turbo: false } %>
    <%= link_to "Téléverser des ajustements de service", admin_adjustments_new_path, class: "btn btn-outline-warning" %>
  </div>

  <!-- Users Section -->
  <section class="mb-5">
    <h2>Utilisateur·trice·s</h2>

    <%= render "users/shared/users_table",
              users: @users,
              unconfirmed_counts: @unconfirmed_counts,
              services_touched_counts: @services_touched_counts,
              show_actions: true %>
  </section>

  <!-- Signup Codes Section -->
  <section class="mb-5">
    <h2>Codes d’accès</h2>
    <%= button_to "Générer un nouveau code", admin_signup_codes_path, method: :post, class: "btn btn-primary mb-3" %>

    <%= render "shared/signup_codes_table",
              signup_codes: @signup_codes %>
  </section>

  <!-- Services ending soon -->
  <section class="mb-5">
    <h2>Services se terminant dans les 30 prochains jours</h2>
    <div class="table-responsive">
      <%= render "fliip_services/shared/services_table", services: @services_ending_soon %>
    </div>
  </section>

  <!-- Services ended recently -->
  <section class="mb-5">
    <h2>Services terminés dans les 30 derniers jours</h2>
    <div class="table-responsive">
      <%= render "fliip_services/shared/services_table", services: @services_ended_recent %>
    </div>
  </section>

</div>
