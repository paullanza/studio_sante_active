<div class="container mt-4">
  <h1 class="mb-4">Admin Dashboard</h1>

  <div class="mb-4 d-flex flex-wrap gap-3">
    <%= button_to "Import All Clients",
                  import_clients_path,
                  method: :post,
                  class: "btn btn-danger",
                  form: { data: { turbo_confirm: "This will import all clients from Fliip. Continue?" } } %>

    <%= link_to "Manage Service Session Limits", admin_services_path, class: "btn btn-outline-dark" %>
    <%= link_to "Review Unconfirmed Sessions", admin_unconfirmed_sessions_path, class: "btn btn-outline-primary" %>
    <%= link_to "Export Clients & Services (CSV)",
                admin_client_services_path(format: :csv),
                class: "btn btn-outline-success",
                data: { turbo: false } %>
    <%= link_to "Upload Service Adjustments", admin_adjustments_new_path, class: "btn btn-outline-warning" %>
  </div>

  <!-- Users Section -->
  <section class="mb-5">
    <h2>Users</h2>

    <%= render "shared/users_table",
              users: @users,
              unconfirmed_counts: @unconfirmed_counts,
              services_touched_counts: @services_touched_counts,
              show_actions: true %>
  </section>

  <!-- Signup Codes Section -->
  <section class="mb-5">
    <h2>Signup Codes</h2>
    <%= button_to "Generate New Code", admin_signup_codes_path, method: :post, class: "btn btn-primary mb-3" %>

    <%= render "shared/signup_codes_table",
              signup_codes: @signup_codes %>
  </section>

  <!-- Services ending soon -->
  <section class="mb-5">
    <h2>Services Ending in Next 30 Days</h2>
    <div class="table-responsive">
      <%= render "shared/services_table", services: @services_ending_soon %>
    </div>
  </section>

  <!-- Services ended recently -->
  <section class="mb-5">
    <h2>Services Ended in Last 30 Days</h2>
    <div class="table-responsive">
      <%= render "shared/services_table", services: @services_ended_recent %>
    </div>
  </section>

</div>
