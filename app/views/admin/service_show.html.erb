<div class="container mt-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="mb-0">Service Definition</h1>
    <%= link_to "Back to Definitions", admin_services_path, class: "btn btn-secondary" %>
  </div>

  <!-- Definition summary + inline edit -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="row g-3 align-items-end">
        <div class="col-md-3">
          <div class="small text-muted">Service ID</div>
          <div class="fs-5"><%= @definition.service_id %></div>
        </div>
        <div class="col-md-5">
          <div class="small text-muted">Service Name</div>
          <div class="fs-5"><%= @definition.service_name.presence || "â€”" %></div>
        </div>
        <div class="col-md-4 text-md-end">
          <div class="small text-muted mb-1">
            <%= @active_count %> active of <%= @total_count %> total services
          </div>
        </div>
      </div>

      <hr>

      <%= form_with url: update_admin_service_path(@definition), method: :patch, class: "row g-2", local: true do |f| %>
        <div class="col-sm-3">
          <%= f.label :paid_sessions, "Paid Sessions", class: "form-label small" %>
          <%= f.number_field :paid_sessions, value: @definition.paid_sessions, min: 0, class: "form-control form-control-sm" %>
        </div>
        <div class="col-sm-3">
          <%= f.label :free_sessions, "Free Sessions", class: "form-label small" %>
          <%= f.number_field :free_sessions, value: @definition.free_sessions, min: 0, class: "form-control form-control-sm" %>
        </div>
        <div class="col-sm-6 d-flex justify-content-sm-end align-items-end">
          <%= f.submit "Update Definition", class: "btn btn-outline-primary" %>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Linked FliipServices -->
  <section>
    <h2 class="h4 mb-3">Linked Services</h2>

    <div class="table-responsive">
      <%= render "fliip_services/shared/services_table", services: @services %>
    </div>
  </section>
</div>
