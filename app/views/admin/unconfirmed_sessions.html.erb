<div class="container mt-4" data-controller="select-all">
  <h1 class="mb-4">Unconfirmed Sessions</h1>

  <%= form_with url: admin_confirm_sessions_path, method: :patch, local: true do %>
    <div class="mb-3">
      <%= submit_tag "Confirm Selected", class: "btn btn-success" %>
    </div>

    <% if @sessions.any? %>
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th scope="col">
              <input type="checkbox" id="select-all" data-action="select-all#toggleAll" data-select-all-target="checkbox">
            </th>
            <th scope="col">Client</th>
            <th scope="col">Service</th>
            <th scope="col">Date</th>
            <th scope="col">Time</th>
            <th scope="col">Présent</th>
            <th scope="col">Note</th>
            <th scope="col">Créé par</th>
          </tr>
        </thead>
        <tbody>
          <% @sessions.each do |session| %>
            <tr>
              <td>
                <%= check_box_tag "session_ids[]", session.id, false, class: "form-check-input", data: { select_all_target: "checkboxItem" } %>
              </td>
              <td><%= session.fliip_user&.user_firstname %> <%= session.fliip_user&.user_lastname %></td>
              <td><%= session.fliip_service&.service_name %></td>
              <td><%= session.date.strftime("%d/%m/%Y") %></td>
              <td><%= session.time.strftime("%H:%M") %></td>
              <td><%= session.present? ? "Oui" : "Non" %></td>
              <td><%= session.note.presence || "–" %></td>
              <td><%= session.user&.full_name || "–" %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p class="text-muted">No unconfirmed sessions found.</p>
    <% end %>
  <% end %>
</div>
