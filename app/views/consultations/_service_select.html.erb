<%# locals: services:, selected_id: %>
<select name="fliip_service_id" class="form-select form-select-sm">
  <option value=""><%= "Aucun achat — associer seulement le client" %></option>

  <% Array(services).each do |s| %>
    <% label = [
      s.service_name.presence || "Service ##{s.id}",
      (s.start_date || s.purchase_date&.to_date)&.strftime("%d/%m/%Y"),
      s.status_name
    ].compact.join(" · ") %>

    <option value="<%= s.id %>" <%= "selected" if s.id.to_s == selected_id.to_s %>>
      <%= label %>
    </option>
  <% end %>
</select>
