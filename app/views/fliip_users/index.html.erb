<div class="container mt-4">
  <h1>Fliip Users</h1>

  <!-- Inline toolbar -->
  <div class="d-flex align-items-center justify-content-between gap-2 mb-2 flex-wrap">
    <!-- Left: page info -->
    <div class="text-muted small flex-shrink-0">
      Page <%= @pagy.page %> of <%= @pagy.pages %> — <%= @pagy.count %> clients
    </div>

    <!-- Center: search (stays centered between left/right) -->
    <div class="flex-grow-1 d-flex justify-content-center order-1 order-md-0">
      <%= form_with url: fliip_users_path, method: :get, class: "d-flex gap-2 w-100", local: true do %>
        <div class="flex-grow-1" style="max-width: 520px;">
          <%= text_field_tag :query, params[:query], class: "form-control",
                             placeholder: "Search by name, email, or ID…" %>
        </div>
        <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
        <% if params[:query].present? %>
          <%= link_to "Clear", fliip_users_path, class: "btn btn-outline-secondary" %>
        <% end %>
      <% end %>
    </div>

    <!-- Right: pager -->
    <div class="flex-shrink-0">
      <%== pagy_bootstrap_nav(@pagy) %>
    </div>
  </div>

  <%= render "shared/client_table",
             fliip_users: @fliip_users,
             recent_services_by_user_id: @recent_services_by_user_id %>

  <div class="d-flex justify-content-end">
    <%== pagy_bootstrap_nav(@pagy) %>
  </div>
</div>
