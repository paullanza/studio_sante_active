<div class="container mt-4">
  <h1>Fliip Users</h1>

  <div class="row justify-content-center">
    <div class="col-sm-8 my-3">
      <%= form_with url: fliip_users_path, method: :get, class: "d-flex gap-2", local: true do %>
        <%= text_field_tag :query, params[:query], class: "form-control", placeholder: "Search by name, email, or ID…" %>
        <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
        <% if params[:query].present? %>
          <%= link_to "Clear", fliip_users_path, class: "btn btn-outline-secondary" %>
        <% end %>
      <% end %>
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center mb-2">
    <div class="text-muted small">
      Page <%= @pagy.page %> of <%= @pagy.pages %> — <%= @pagy.count %> clients
    </div>
    <div><%== pagy_bootstrap_nav(@pagy) %></div>
  </div>

  <%= render "shared/client_table",
             fliip_users: @fliip_users,
             recent_services_by_user_id: @recent_services_by_user_id %>

  <div class="d-flex justify-content-end">
    <%== pagy_bootstrap_nav(@pagy) %>
  </div>
</div>
