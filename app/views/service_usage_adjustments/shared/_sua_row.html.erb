<% adj = adjustment %>
<tr id="<%= dom_id(adj) %>"
    data-controller="sua-row"
    data-sua-row-id-value="<%= adj.id %>"
    data-sua-row-edit-url-value="<%= edit_fliip_service_service_usage_adjustment_path(service, adj) %>"
    data-sua-row-update-url-value="<%= fliip_service_service_usage_adjustment_path(service, adj) %>"
    data-sua-row-index-url-value="<%= fliip_service_path(service) %>">
  <td><%= adj.created_at.strftime("%d/%m/%Y %H:%M") %></td>
  <td><%= adj.user&.full_name || "—" %></td>
  <td class="text-end"><%= adj.paid_used_delta.to_f.zero? ? "—" : fmt1(adj.paid_used_delta) %></td>
  <td class="text-end"><%= adj.free_used_delta.to_f.zero? ? "—" : fmt1(adj.free_used_delta) %></td>
  <td class="text-end"><%= adj.bonus_sessions.to_f.zero? ? "—" : fmt1(adj.bonus_sessions) %></td>

  <% if can_manage %>
    <td class="text-end align-middle text-nowrap">
      <a href="<%= edit_fliip_service_service_usage_adjustment_path(service, adj) %>"
         class="btn btn-sm btn-outline-secondary me-1"
         title="Modifier"
         data-action="sua-row#edit">
        <i class="fa-solid fa-pencil"></i>
      </a>

      <a href="<%= fliip_service_service_usage_adjustment_path(service, adj) %>"
         class="btn btn-sm btn-outline-danger"
         title="Supprimer"
         data-action="sua-row#confirmDelete"
         data-modal-title="Supprimer l’ajustement"
         data-modal-body="Confirmer la suppression de cet ajustement ?"
         data-modal-primary-label="Supprimer"
         data-modal-secondary-label="Annuler">
        <i class="fa-solid fa-trash-can"></i>
      </a>
    </td>
  <% end %>
</tr>
